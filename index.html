<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }

    .game-container {
      position: relative;
      width: 400px;
      height: 400px;
      border: 1px solid #000;
      overflow: hidden; 
      /* 내부의 블록이 컨테이너를 벗어나지 않도록 함 */
    }

    .player, .poop {
      position: absolute;
      width: 50px;
      height: 50px;
      background-color: #3498db;
    }

    .player {
      bottom: 0;
      left: 50%; /* 플레이어를 가운데 위치로 조정 */
      transform: translateX(-50%); /* 플레이어를 가운데 위치로 조정 */
    }

    .poop {
      animation: fall 2s linear infinite; /* 수정: 새로운 애니메이션 추가 */
    }

    @keyframes fall {
      0% {
        transform: translateY(0); /* 초기 위치 */
      }
      25% {
        transform: translateY(200px); /* 중간 위치 */
      }
      50% {
        transform: translateY(400px); /* 바닥 위치 */
      }
      100% {
        transform: translateY(400px); /* 바닥 위치에서 유지됨 */
      }
    }
  </style>
  <title>Dodge the Poop Game</title>
</head>
<body>
  <div class="game-container">
    <div class="player"></div>
    <div class="poop"></div>
  </div>
  <script>
    const poopElement = document.querySelector('.poop');
    const playerElement = document.querySelector('.player');
    const containerElement = document.querySelector('.game-container');

    function updatePoopPosition() {
      poopElement.style.left = `${Math.random() * (350 - 50)+50}px`;
    }

    poopElement.addEventListener('animationiteration', () => {
      updatePoopPosition();
    });

    document.addEventListener('keydown', (event) => {
      const playerWidth = playerElement.offsetWidth;
      const containerRect = containerElement.getBoundingClientRect();
      const playerLeft = playerElement.offsetLeft;

      switch (event.key) {
        case 'ArrowLeft':
          playerElement.style.left = `${Math.max(0, playerLeft - 10)}px`;
          break;
        case 'ArrowRight':
          playerElement.style.left = `${Math.min(containerRect.width - playerWidth, playerLeft + 10)}px`;
          break;
      }
    });
  </script>
</body>
</html>
